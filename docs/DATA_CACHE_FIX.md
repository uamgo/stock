# è‚¡ç¥¨æ•°æ®è·å–é—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·å‘ç°é€‰è‚¡æ—¶æ˜¾ç¤º"ä»41åªè‚¡ç¥¨ä¸­é€‰å–"ï¼Œä½†updateå‘½ä»¤æ˜¾ç¤ºæœ‰285åªè‚¡ç¥¨ï¼Œæ•°æ®ä¸åŒ¹é…ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜å®šä½
1. **æ•°æ®æºæ–‡ä»¶**: `/tmp/stock/est_prepare_data/members_df.pkl` ç¡®å®åŒ…å«285åªè‚¡ç¥¨
2. **ç¼“å­˜æœºåˆ¶**: `EastmoneyDataFetcher` ä½¿ç”¨äº†60åˆ†é’Ÿçš„ç¼“å­˜æœºåˆ¶
3. **ç¼“å­˜ä¼˜å…ˆ**: ç³»ç»Ÿä¼˜å…ˆä½¿ç”¨ç¼“å­˜æ•°æ®ï¼Œè€Œéæœ€æ–°çš„æºæ•°æ®æ–‡ä»¶

### æ ¹æœ¬åŸå› 
```python
# åŸæœ‰é€»è¾‘ - é—®é¢˜æ‰€åœ¨
def get_stock_list(self):
    # å…ˆæ£€æŸ¥ç¼“å­˜ï¼ˆ60åˆ†é’Ÿæœ‰æ•ˆæœŸï¼‰
    cached_data = self.get_from_cache(cache_key, expire_minutes=60)
    if cached_data is not None:
        return cached_data  # è¿”å›æ—§çš„41åªè‚¡ç¥¨
    
    # åªæœ‰ç¼“å­˜å¤±æ•ˆæ—¶æ‰è¯»å–æ–°æ•°æ®
    members_df = self.prepare_data.load_members_df_from_path()  # 285åªè‚¡ç¥¨
    return members_df
```

**é—®é¢˜åœºæ™¯**ï¼š
1. ç³»ç»Ÿåˆæ¬¡è¿è¡Œæ—¶ç¼“å­˜äº†41åªè‚¡ç¥¨
2. ç”¨æˆ·è¿è¡Œ `update` å‘½ä»¤æ›´æ–°æ•°æ®åˆ°285åªè‚¡ç¥¨
3. é€‰è‚¡æ—¶ç”±äºç¼“å­˜æœªè¿‡æœŸï¼Œä»ä½¿ç”¨æ—§çš„41åªè‚¡ç¥¨æ•°æ®

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹ç­–ç•¥
æ”¹å˜ç¼“å­˜é€»è¾‘ï¼š**ä¼˜å…ˆä½¿ç”¨æœ€æ–°æ•°æ®ï¼Œç¼“å­˜ä½œä¸ºå¤‡ç”¨**

### ä¿®å¤ä»£ç 
```python
def get_stock_list(self):
    try:
        # ç›´æ¥è¯»å–æœ€æ–°æ•°æ®
        members_df = self.prepare_data.load_members_df_from_path()
        
        if members_df is not None and not members_df.empty:
            # æ›´æ–°ç¼“å­˜
            self.save_to_cache(cache_key, members_df)
            return members_df
        
        # æ•°æ®ä¸å¯ç”¨æ—¶ä½¿ç”¨ç¼“å­˜ä½œä¸ºå¤‡ç”¨
        cached_data = self.get_from_cache(cache_key, expire_minutes=60)
        if cached_data is not None:
            return cached_data
            
    except Exception as e:
        # å‡ºé”™æ—¶ä½¿ç”¨ç¼“å­˜ä½œä¸ºå¤‡ç”¨
        cached_data = self.get_from_cache(cache_key, expire_minutes=60)
        if cached_data is not None:
            return cached_data
    
    return pd.DataFrame()
```

### ä¿®æ”¹æ–‡ä»¶
- `/Users/kevin/workspace/stock/tail_trading/data/eastmoney/daily_fetcher.py`

## âœ… ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰
```
ğŸ“Š å¼€å§‹åˆ†æ 41 åªè‚¡ç¥¨...
ğŸ“ˆ ç­›é€‰ç»Ÿè®¡ç»“æœ:
  ğŸ“Š æ€»è‚¡ç¥¨æ•°: 41
  âŒ æ•°æ®ä¸è¶³: 1 (2.4%)
  ğŸš« ä¸ç¬¦åˆæ¡ä»¶: 40 (97.6%)
  âœ… ç¬¦åˆæ¡ä»¶: 0 (0.0%)
```

### ä¿®å¤å
```
ğŸ“Š å¼€å§‹åˆ†æ 285 åªè‚¡ç¥¨...
ğŸ“ˆ ç­›é€‰ç»Ÿè®¡ç»“æœ:
  ğŸ“Š æ€»è‚¡ç¥¨æ•°: 285
  âŒ æ•°æ®ä¸è¶³: 2 (0.7%)
  ğŸš« ä¸ç¬¦åˆæ¡ä»¶: 277 (97.2%)
  âœ… ç¬¦åˆæ¡ä»¶: 6 (2.1%)
```

## ğŸ“Š é€‰è‚¡ç»“æœå¯¹æ¯”

### ä¿å®ˆç­–ç•¥ (Conservative)
- **æ€»è‚¡ç¥¨æ•°**: 285åª
- **ç¬¦åˆæ¡ä»¶**: 6åª (2.1%)
- **æ¨èè‚¡ç¥¨**: é€šåŒ–é‡‘é©¬ã€æ™¨ä¸°ç§‘æŠ€ã€å…‰æ´‹è‚¡ä»½ç­‰

### å¹³è¡¡ç­–ç•¥ (Balanced)
- **æ€»è‚¡ç¥¨æ•°**: 285åª  
- **ç¬¦åˆæ¡ä»¶**: 13åª (4.6%)
- **æ¨èè‚¡ç¥¨**: é€šåŒ–é‡‘é©¬ã€æ™¨ä¸°ç§‘æŠ€ã€å¼˜ä¿¡ç”µå­ç­‰

## ğŸ”§ é¢å¤–æ”¹è¿›

### 1. è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
å¢åŠ äº†é€‰è‚¡è¿‡ç¨‹çš„è¯¦ç»†ç»Ÿè®¡ï¼š
```python
ğŸ“ˆ ç­›é€‰ç»Ÿè®¡ç»“æœ:
  ğŸ“Š æ€»è‚¡ç¥¨æ•°: 285
  âŒ æ•°æ®ä¸è¶³: 2 (0.7%)    # ç¼ºå°‘è¶³å¤Ÿçš„å†å²æ•°æ®
  ğŸ”§ åˆ†æå¤±è´¥: 0 (0.0%)    # åˆ†æè¿‡ç¨‹å‡ºé”™
  ğŸš« ä¸ç¬¦åˆæ¡ä»¶: 277 (97.2%)  # ä¸ç¬¦åˆç­–ç•¥æ¡ä»¶
  âœ… ç¬¦åˆæ¡ä»¶: 6 (2.1%)    # é€šè¿‡æ‰€æœ‰ç­›é€‰æ¡ä»¶
```

### 2. è¿›åº¦æ˜¾ç¤º
æ·»åŠ äº†åˆ†æè¿›åº¦æ˜¾ç¤ºï¼š
```python
ğŸ” è¿›åº¦: 50/285 (17.5%)
ğŸ” è¿›åº¦: 100/285 (35.1%)
```

### 3. è¯¦ç»†å‚æ•°
å¢åŠ äº† `--verbose` å‚æ•°ï¼Œå¯æ˜¾ç¤ºæ›´è¯¦ç»†çš„ç­›é€‰è¿‡ç¨‹ã€‚

## ğŸ¯ æŠ€æœ¯è¦ç‚¹

### ç¼“å­˜è®¾è®¡åŸåˆ™
1. **æ•°æ®æ–°é²œåº¦ä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨æœ€æ–°æ•°æ®
2. **ç¼“å­˜ä½œä¸ºå¤‡ç”¨**: åªåœ¨æ•°æ®ä¸å¯ç”¨æ—¶ä½¿ç”¨ç¼“å­˜
3. **å®æ—¶æ›´æ–°**: æ¯æ¬¡è·å–æ•°æ®æ—¶æ›´æ–°ç¼“å­˜

### é”™è¯¯å¤„ç†
1. **å¤šå±‚fallback**: æ•°æ®æº â†’ ç¼“å­˜ â†’ ç©ºæ•°æ®
2. **å¼‚å¸¸å¤„ç†**: æ•è·æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸
3. **æ—¥å¿—è®°å½•**: è®°å½•æ•°æ®æ¥æºå’Œé—®é¢˜

## ğŸ“ ä½¿ç”¨å»ºè®®

### 1. æ•°æ®æ›´æ–°åç«‹å³é€‰è‚¡
```bash
# æ›´æ–°æ•°æ®
python tail_trading.py update --top 10

# ç«‹å³é€‰è‚¡ï¼ˆæ— éœ€ç­‰å¾…ç¼“å­˜è¿‡æœŸï¼‰
python tail_trading.py select --preset balanced
```

### 2. æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
```bash
python tail_trading.py select --preset conservative --verbose
```

### 3. ç›‘æ§æ•°æ®è´¨é‡
ç³»ç»Ÿç°åœ¨ä¼šæ˜¾ç¤ºæ•°æ®è´¨é‡ç»Ÿè®¡ï¼Œå¸®åŠ©åˆ¤æ–­æ•°æ®æ˜¯å¦å……è¶³ã€‚

---

**ä¿®å¤æ—¶é—´**: 2025-07-17 14:55  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡éªŒè¯
