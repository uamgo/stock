# 补涨概率计算详解

## 📊 补涨概率是什么？

补涨概率是一个综合评分指标（0-100分），用于评估股票次日继续上涨的可能性。它基于技术分析的多个维度进行量化评估。

## 🧮 计算公式详解

### 总体计算逻辑
```
补涨概率 = 涨跌幅评分 + 量比评分 + 技术形态评分 + 位置评分 + 趋势评分
```

### 各项评分详细算法

#### 1. 涨跌幅评分 (权重: 25%)
```python
if 2.0% <= 当日涨幅 <= 4.0%:
    评分 = 25 × 0.25 = 6.25分   # 最佳区间
elif 1.0% <= 当日涨幅 < 2.0%:
    评分 = 20 × 0.25 = 5分      # 较好区间
elif 4.0% < 当日涨幅 <= 6.0%:
    评分 = 15 × 0.25 = 3.75分   # 一般区间
else:
    评分 = 0分                  # 不符合条件
```

**评分逻辑**：
- 涨幅2-4%：最佳，既有上涨动力又不过热
- 涨幅1-2%：较好，温和上涨
- 涨幅4-6%：一般，可能有获利回吐压力
- 其他区间：不符合策略要求

#### 2. 量比评分 (权重: 25%)
```python
if 1.5倍 <= 量比 <= 2.5倍:
    评分 = 25 × 0.25 = 6.25分   # 最佳区间
elif 1.2倍 <= 量比 < 1.5倍:
    评分 = 20 × 0.25 = 5分      # 较好区间
elif 2.5倍 < 量比 <= 3.0倍:
    评分 = 15 × 0.25 = 3.75分   # 一般区间
else:
    评分 = 10 × 0.25 = 2.5分    # 较差区间
```

**评分逻辑**：
- 量比1.5-2.5倍：最佳，温和放量
- 量比1.2-1.5倍：较好，适度放量
- 量比2.5-3.0倍：一般，可能过度炒作
- 其他：较差，要么缩量要么暴量

#### 3. 技术形态评分 (权重: 25%)
```python
影线比 = 下影线长度 / 实体长度

if 影线比 >= 0.8:
    评分 = 25 × 0.25 = 6.25分   # 下影线很长，支撑强
elif 影线比 >= 0.5:
    评分 = 20 × 0.25 = 5分      # 下影线较长
elif 影线比 >= 0.2:
    评分 = 15 × 0.25 = 3.75分   # 下影线一般
else:
    评分 = 10 × 0.25 = 2.5分    # 下影线较短
```

**评分逻辑**：
- 下影线越长，说明下方支撑越强，反弹概率越高
- 十字星等小实体形态也会给予较高评分

#### 4. 位置评分 (权重: 25%)
```python
位置比例 = (当前价格 - 20日最低价) / (20日最高价 - 20日最低价)

if 位置比例 <= 0.4:
    评分 = 20 × 0.25 = 5分      # 低位，最佳
elif 位置比例 <= 0.6:
    评分 = 15 × 0.25 = 3.75分   # 中低位，较好
elif 位置比例 <= 0.8:
    评分 = 10 × 0.25 = 2.5分    # 中高位，一般
else:
    评分 = 5 × 0.25 = 1.25分    # 高位，较差
```

**评分逻辑**：
- 位置越低，上涨空间越大，补涨概率越高
- 避免高位接盘的风险

#### 5. 趋势评分 (固定权重)
```python
MA3今日 = 最近3日收盘价平均值
MA3三日前 = 3-6日前收盘价平均值
趋势斜率 = (MA3今日 - MA3三日前) / MA3三日前 × 100%

if 趋势斜率 > 1%:
    评分 = 5分                  # 强势上涨趋势
elif 趋势斜率 > 0%:
    评分 = 3分                  # 弱势上涨趋势
else:
    评分 = 0分                  # 无明显趋势
```

**评分逻辑**：
- 短期均线向上，确保整体趋势良好
- 这是一个趋势确认指标

## 🎯 评分标准与含义

### 补涨概率分数段解释

#### 🟢 70-100分：高概率区间
- **含义**：次日补涨概率很高
- **特征**：各项指标都接近最佳状态
- **操作建议**：重点关注，优先选择
- **预期胜率**：70-80%

#### 🟡 50-69分：中等概率区间
- **含义**：次日补涨概率一般
- **特征**：部分指标较好，部分指标一般
- **操作建议**：谨慎操作，可适量配置
- **预期胜率**：50-60%

#### 🟠 30-49分：较低概率区间
- **含义**：次日补涨概率较低
- **特征**：多数指标不够理想
- **操作建议**：不建议操作
- **预期胜率**：30-40%

#### 🔴 0-29分：低概率区间
- **含义**：次日补涨概率很低
- **特征**：各项指标都不理想
- **操作建议**：避免操作
- **预期胜率**：<30%

## 📈 实际案例分析

### 案例1：高分股票 (汉宇集团 - 22分)
```
涨跌幅: 2.15%        → 6.25分 (最佳区间)
量比: 1.53倍         → 5分    (较好区间)
下影线/实体: 0.6     → 5分    (较好形态)
20日位置: 83.3%      → 1.25分 (位置较高)
趋势: 向上           → 3分    (弱势上涨)
总分: 20.5分
```

### 案例2：中等分数股票 (红日药业 - 19分)
```
涨跌幅: 2.81%        → 6.25分 (最佳区间)
量比: 1.27倍         → 5分    (较好区间)
下影线/实体: 0.4     → 3.75分 (一般形态)
20日位置: 73.2%      → 2.5分  (中高位)
趋势: 向上           → 3分    (弱势上涨)
总分: 20.5分
```

## 🔧 参数调优建议

### 当前配置 (balanced 预设)
```python
price_weight = 0.25      # 价格权重 25%
volume_weight = 0.25     # 成交量权重 25%
technical_weight = 0.25  # 技术形态权重 25%
position_weight = 0.25   # 位置权重 25%
```

### 不同市场环境的调整建议

#### 牛市环境
```python
price_weight = 0.3       # 加重涨幅权重
volume_weight = 0.3      # 加重成交量权重
technical_weight = 0.2   # 降低技术形态权重
position_weight = 0.2    # 降低位置权重
```

#### 熊市环境
```python
price_weight = 0.2       # 降低涨幅权重
volume_weight = 0.2      # 降低成交量权重
technical_weight = 0.3   # 加重技术形态权重
position_weight = 0.3    # 加重位置权重
```

#### 震荡市环境
```python
price_weight = 0.25      # 保持均衡
volume_weight = 0.25     # 保持均衡
technical_weight = 0.25  # 保持均衡
position_weight = 0.25   # 保持均衡
```

## 💡 使用建议

### 选股阈值建议
- **激进策略**：补涨概率 ≥ 15分
- **平衡策略**：补涨概率 ≥ 20分
- **保守策略**：补涨概率 ≥ 25分

### 实际操作建议
1. **优先选择30分以上**的股票
2. **20-30分可适量配置**
3. **15-20分谨慎操作**
4. **15分以下避免操作**

### 风险提示
- 补涨概率只是量化参考，不是绝对预测
- 需要结合市场环境、个股基本面等因素
- 建议设置止损，控制风险
- 分散投资，避免集中持仓

---

**注意**：补涨概率是基于历史数据和技术分析的量化评估，实际投资需要结合更多因素综合判断。
